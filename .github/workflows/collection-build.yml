name: collection-build

on:
  push:
  pull_request:
  schedule:
    - cron: "0 0 * * *"

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v3
            - name: Build the collection
              run: |
                ansible-galaxy collection build
            - name: Archive recent build
              uses: actions/upload-artifact@v3
              with:
                name: collection-build
                path: datadog-dd-*.tar.gz
                retention-days: 1
